{% extends 'base.html' %}

{% block content %}

<div class="container my-5">

    <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">

            <!-- Form Card -->
            <div class="card shadow border-0">
                <div class="card-body p-4">

                    <h3 class="text-center fw-bold text-primary mb-4">Book an Appointment</h3>
                    <p class="text-center text-muted mb-4">Select your doctor, date, and time slot to schedule your visit</p>

                    <form method="POST" class="needs-validation" novalidate>

                        <!-- SELECT DOCTOR -->
                        <div class="mb-3">
                            <label for="doctor" class="form-label fw-semibold">Choose Doctor</label>
                            <select name="doctor_id" id="doctor" class="form-select" required>
                                <option value="">Select a doctor</option>
                                {% for doc in doctors %}
                                    <option value="{{ doc.id }}"
                                        {% if preselected_doctor_id and preselected_doctor_id == doc.id %} selected {% endif %}>
                                        {{ doc.name }} - {{ doc.specialization }}
                                    </option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback">Please select a doctor.</div>
                        </div>

                        <!-- SELECT DATE -->
                        <div class="mb-3">
                            <label for="date" class="form-label fw-semibold">Select Date</label>
                            <input
                                type="text"
                                id="date"
                                name="date"
                                class="form-control rounded"
                                placeholder="Choose a date"
                                required
                            />
                            <div class="invalid-feedback">Please select a date.</div>
                        </div>

                        <!-- SELECT TIME SLOT -->
                        <div class="mb-3">
                            <label for="time" class="form-label fw-semibold">Select Time Slot</label>
                            <select name="time" id="time" class="form-select" required>
                                <option value="">Select a time slot</option>
                                <option value="09:00 AM">09:00 AM</option>
                                <option value="10:00 AM">10:00 AM</option>
                                <option value="11:00 AM">11:00 AM</option>
                                <option value="02:00 PM">02:00 PM</option>
                                <option value="03:00 PM">03:00 PM</option>
                                <option value="04:00 PM">04:00 PM</option>
                            </select>
                            <div class="invalid-feedback">Please select a time slot.</div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary btn-lg w-100 mt-3">
                            <i class="bi bi-calendar-check me-2"></i> Book Appointment
                        </button>

                    </form>

                </div>
            </div>

        </div>
    </div>

</div>

<!-- Initialize Flatpickr -->
<script>
  flatpickr("#date", {
    minDate: "today",
    dateFormat: "Y-m-d",
  });
</script>

{% endblock %}